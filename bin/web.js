module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.e=function(){return Promise.resolve()},r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){process.nextTick((function(){throw e}))},r(r.s=22)}([function(e){e.exports=JSON.parse('{"secret":"79a947c3cbecfb5819b03f21eb00b3180e649bea0c189a7f4ff0bdd10e1fd292","authTokenExpiresIn":"7 days","cookieOptions":{"expires":14,"path":"/","domain":"","secure":false,"sameSite":"strict"},"mongo":{"url":"mongodb://localhost:27017","dbName":"zoia"},"apiServer":{"ip":"127.0.0.1","port":3000},"webServer":{"ip":"127.0.0.1","port":3001},"originCORS":"*","trustProxy":true,"development":false,"loglevel":"info"}')},function(e,t){e.exports=require("pino")},function(e,t){e.exports=require("marko/src/html")},function(e,t){e.exports=require("marko/src/runtime/components/helpers")},function(e,t){e.exports=require("marko/src/runtime/html/helpers")},function(e,t){e.exports=require("fastify-mongodb")},function(e,t){e.exports=require("fastify-url-data")},function(e,t){e.exports=require("fastify-cors")},function(e,t){e.exports=require("fastify-jwt")},function(e,t){e.exports=require("fastify-formbody")},function(e,t){e.exports=require("fastify-multipart")},function(e){e.exports=JSON.parse('{"admin":{"id":"admin","icon":"","admin":false,"adminRoute":"/admin/users"},"pages":{"id":"pages","icon":"file-text","admin":true,"adminRoute":"/admin/pages"},"registry":{"id":"registry","icon":"","admin":false,"adminRoute":""},"users":{"id":"users","icon":"users","admin":true,"adminRoute":"/admin/users"}}')},function(e,t){e.exports=require("mongodb")},function(e,t){e.exports=require("fastify")},function(e,t,r){"use strict";(function(t){var n=e.exports=r(2).t(t),o=r(3),s=o.r,i=o.c,a=r(17),u=r(18),c=(u.default,u.getBundleName),l=u.entries,f=r(4),d=f.d,p=(0,f.t)(r(19));function m(){const e=this.___assets;this.___renderAssets=this.___assets=void 0,this.flush=this.___flush,this.end=this.___end,e&&(this.write(`<script>window.$mwp=${JSON.stringify(r.p)}`),e.js&&this.write(`;(function(b,h){var e=[],c=0;h.forEach(function(d,f){var a=b.createElement("link");a.relList&&a.relList.supports&&a.relList.supports("preload")?(a.href=d,a.rel="preload",a.as="script",a.addEventListener("load",function(){e[f]=d;if(c===f)for(var a;a=e[c];c++){var g=b.createElement("script");g.src=a;b.head.appendChild(g)}}),b.head.appendChild(a)):(a=b.createElement("script"),a.src=d,a.defer=!0,b.head.appendChild(a))})})(document,${JSON.stringify(e.js.map(e=>r.p+e))})`),this.write("<\/script>"),e.css&&e.css.forEach(e=>{this.write(`<link rel="stylesheet" href=${JSON.stringify(r.p+e)}>`)}))}function g(){this.___renderAssets(),this.flush()}function _(e,t,r){this.___renderAssets(),this.end(e,t,r)}n._=s((function(e,t,r,n,o){t.___flush=t.flush,t.___end=t.end,t.___renderAssets=m,t.___assets=l.markoTest_Spxw[c(t.global)],t.flush=g,t.end=_,d(t,a,(function(){return e}),null,null,null,r,"0"),p({},t)}),{___implicit:!0,___type:"/zoia2$1.0.0/modules/pages/marko/markoTest/template.marko"}),n.Component=i({},n._),n.meta={id:"/zoia2$1.0.0/modules/pages/marko/markoTest/template.marko",tags:["./template.marko","marko/src/core-tags/components/init-components-tag"]}}).call(this,"/index.js")},function(e,t,r){var n={"./admin/marko/index.js":[16,0],"./pages/marko/index.js":[23,0],"./registry/marko/index.js":[20,0],"./users/marko/index.js":[21,0]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id=15,e.exports=o},function(e,t,r){"use strict";r.r(t),t.default=()=>{}},function(e,t,r){"use strict";(function(t){var n=e.exports=r(2).t(t),o={onCreate:function(){this.state={count:0}},increment:function(){this.state.count++}},s=r(3),i=s.r,a=s.c,u=r(4).x;n._=i((function(e,t,r,n,o){t.w("<h1>Hello World from Pages!</h1><div>The current count is "+u(o.count)+"</div><button>Click me!</button>")}),{___type:"/zoia2$1.0.0/modules/pages/marko/markoTest/template.marko"},o),n.Component=a(o,n._),n.meta={id:"/zoia2$1.0.0/modules/pages/marko/markoTest/template.marko",component:"./template.marko"}}).call(this,"/index.js")},function(e,t){e.exports={getBundleName:function(){return"Web Server - Client Part"},entries:{markoTest_Spxw:{"Web Server - Client Part":{js:["vendors~markoTest_Spxw.c54a5200.js","markoTest_Spxw.c0c63456.js"],map:["vendors~markoTest_Spxw.c54a5200.js.map","markoTest_Spxw.c0c63456.js.map"]}}}}},function(e,t){e.exports=require("marko/src/core-tags/components/init-components-tag")},function(e,t,r){"use strict";r.r(t),t.default=()=>{}},function(e,t,r){"use strict";r.r(t),t.default=()=>{}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(1),s=r.n(o),i=s()({level:n.loglevel}),a=r(5),u=r.n(a),c=r(6),l=r.n(c),f=r(7),d=r.n(f),p=r(8),m=r.n(p),g=r(9),_=r.n(g),h=r(10),x=r.n(h),b=r(11),y=r(12),v=r(13),k=r.n(v);const w=s()({level:n.loglevel}),S=k()({logger:i,trustProxy:n.trustProxy});(async()=>{const e=new y.MongoClient(n.mongo.url,{useNewUrlParser:!0,useUnifiedTopology:!0});await e.connect(),S.register(_.a),S.register(x.a,{addToBody:!0}),S.register(l.a),S.register(u.a,{client:e,database:n.mongo.dbName}).register((e,t,r)=>{e.mongo.client.db(n.mongo.dbName).on("close",()=>{w.error("Connection to MongoDB is broken"),process.exit(1)}),r()}),S.register(d.a,{origin:n.originCORS}),S.register(m.a,{secret:n.secret}),await Promise.all(Object.keys(b).map(async e=>{(await r(15)(`./${e}/marko/index.js`)).default(S)})),w.info("Starting Web server..."),S.listen(n.webServer.port,n.webServer.ip)})().catch(e=>{w.error(e),process.exit(1)})},function(e,t,r){"use strict";r.r(t);var n=r(14),o=r.n(n);t.default=e=>{e.get("/",(()=>({async handler(e,t){try{const e=await o.a.render({});return t.code(200).type("text/html").send(e.out.stream.str)}catch(e){return t.code(500).send(JSON.stringify({statusCode:500,error:"Internal server error",message:e.message}))}}}))())}}]);