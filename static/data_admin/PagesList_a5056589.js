(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{598:function(t,e,a){"use strict";a.r(e);var n=a(50),o=a.n(n),i=a(51),r=a.n(i),s=a(52),u=a.n(s),c=a(20),l=a.n(c),p=a(53),d=a.n(p),g=a(5),m=a.n(g),f=a(0),b=a.n(f),k=a(74),h=a(15),D=a(73),R=a.n(D),L=a(114),T=a(54),_=a(391),E=a.n(_),S=a(75),v=a(72),C=a.n(v),O=a(599),A=a(117),w=a(600),y=a(115),P=a(27),j=a(130),x=a(116),N=Object(f.lazy)((function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,602))})),U=Object(f.lazy)((function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,612))})),z=Object(f.lazy)((function(){return a.e(4).then(a.bind(null,610))})),F=function(t){function e(t){var a;return o()(this,e),a=r()(this,u()(e).call(this,t)),m()(l()(a),"componentDidMount",(function(){a.props.appDataRuntime.token?E.a.parse(window.location.search).reload&&a.pagesListTable.current&&a.pagesListTable.current.reloadURL():S.b.push("/admin/users/auth?redirect=/admin/pages")})),m()(l()(a),"deauthorize",(function(){a.props.appDataRuntimeSetTokenAction(null),a.props.appDataSetUserAction({}),Object(L.remove)("".concat(P.id,"_auth")),S.b.push("/admin/users/auth?redirect=/admin/pages")})),m()(l()(a),"onPagesTableLoadError",(function(t){t&&403===t.status&&(a.deauthorize(),a.props.pagesListTableSetStateAction({}))})),m()(l()(a),"onPagesTableSaveError",(function(t,e){if(t)switch(403===t.statusCode&&a.deauthorize(),t.errorCode){case 1:C.a.notification(e._({id:"Record with the entered value already exists"}),{status:"danger"});break;case 2:C.a.notification(e._({id:"Invalid format"}),{status:"danger"});break;default:C.a.notification(e._({id:"Could not save data"}),{status:"danger"})}else C.a.notification(e._({id:"Could not save data"}),{status:"danger"})})),m()(l()(a),"onTableStateUpdated",(function(t){return a.props.pagesListTableSetStateAction(t)})),m()(l()(a),"onDeleteRecord",(function(t,e){e&&e.preventDefault();var n=[],o=[],i=a.pagesListTable.current;if(t&&e){n.push(t);var r=i.getCurrentData();o.push("".concat(r.title[t]," (").concat(r.path[t],")"))}else{i.getCheckboxData().map((function(t){n.push(t._id),o.push("".concat(t.title," (").concat(t.path,")"))}))}n.length&&a.dialogDelete.current.show(o,n)})),m()(l()(a),"onDeleteButtonClick",(function(t,e){a.dialogDelete.current.hide(),a.pagesListTable.current.setLoading(!0),R.a.post("".concat(y.url,"/api/pages/delete"),{token:a.props.appDataRuntime.token,ids:t},{headers:{"content-type":"application/json"}}).then((function(t){return a.pagesListTable.current.setLoading(!1),200!==t.data.statusCode?C.a.notification(e._({id:"Cannot delete one or more pages"}),{status:"danger"}):(a.pagesListTable.current.reloadURL(),C.a.notification(e._({id:"Operation complete"}),{status:"success"}))})).catch((function(){return a.pagesListTable.current.setLoading(!1)&&C.a.notification(e._({id:"Cannot delete one or more pages"}),{status:"danger"})}))})),m()(l()(a),"processActions",(function(t,e,n){return b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{to:"/admin/pages/edit/".concat(e._id),className:"uk-icon-button","uk-icon":"pencil","uk-tooltip":"title: ".concat(n._({id:"Edit"}))})," ",b.a.createElement("a",{href:"",className:"uk-icon-button","uk-icon":"trash","uk-tooltip":"title: ".concat(n._({id:"Delete"})),onClick:function(t){return a.onDeleteRecord(e._id,t)}}))})),m()(l()(a),"onRefreshTable",(function(t){t.preventDefault(),a.pagesListTable.current&&a.pagesListTable.current.reloadURL()})),m()(l()(a),"render",(function(){return b.a.createElement(N,null,b.a.createElement(k.I18n,null,(function(t){var e=t.i18n;return a.props.appDataRuntimeSetDocumentTitleAction(e._({id:"Pages"}),a.props.appData.language,a.props.appDataRuntime.config.siteTitle),b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"uk-title-head uk-margin-bottom"},e._({id:"Pages"})),b.a.createElement(U,{prefix:"pagesListTable",ref:a.pagesListTable,initialState:a.props.pagesList.pagesTableState,onStateUpdated:a.onTableStateUpdated,i18n:e,UIkit:C.a,axios:R.a,topButtons:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{to:"/admin/pages/add",className:"uk-icon-button uk-button-primary uk-margin-small-right","uk-icon":"plus","uk-tooltip":e._({id:"Create new page"})}),b.a.createElement("button",{type:"button",className:"uk-icon-button uk-button-danger uk-margin-right","uk-icon":"trash","uk-tooltip":e._({id:"Delete selected pages"}),onClick:a.onDeleteRecord}),b.a.createElement("button",{type:"button",className:"uk-icon-button uk-button-default","uk-icon":"refresh","uk-tooltip":e._({id:"Refresh"}),onClick:a.onRefreshTable})),columns:[{id:"title",title:{id:"Page"},sortable:!0,cssHeader:"uk-text-nowrap uk-width-expand"},{id:"path",title:{id:"Path"},sortable:!0,cssHeader:"uk-text-nowrap"},{id:"actions",title:{id:"Actions"},cssRow:"uk-table-shrink uk-text-nowrap ztable-noselect",process:function(t,n){return a.processActions(t,n,e)}}],itemsPerPage:a.props.appDataRuntime.config.commonItemsLimit,source:{url:"".concat(y.url,"/api/pages/list"),method:"POST",extras:{token:a.props.appDataRuntime.token,language:a.props.appData.language}},save:{url:"".concat(y.url,"/api/pages/saveField"),method:"POST",extras:{token:a.props.appDataRuntime.token}},sortColumn:"title",sortDirection:"asc",lang:{LOADING:e._({id:"Loading data, please wait…"}),NO_RECORDS:e._({id:"No records to display"}),ERROR_LOAD:e._({id:"Could not load data"}),ERROR_SAVE:e._({id:"Could not save data"}),ERR_VMANDATORY:e._({id:"Field is required"}),ERR_VFORMAT:e._({id:"Invalid format"})},onLoadError:a.onPagesTableLoadError,onSaveError:function(t){return a.onPagesTableSaveError(t,e)}}),b.a.createElement(z,{ref:a.dialogDelete,i18n:e,onDeleteButtonClickHandler:function(t){return a.onDeleteButtonClick(t,e)}}))})))})),a.pagesListTable=b.a.createRef(),a.dialogDelete=b.a.createRef(),a}return d()(e,t),e}(f.Component);e.default=Object(h.c)((function(t){return{appData:t.appData,appDataRuntime:t.appDataRuntime,appLingui:t.appLingui,pagesList:t.pagesList}}),(function(t){return{appDataRuntimeSetTokenAction:function(e){return t(Object(O.a)(e))},appDataSetUserAction:function(e){return t(Object(w.a)(e))},pagesListTableSetStateAction:function(e){return t((a=e,{type:j.a,payload:a}));var a},appLinguiSetCatalogAction:function(e,a){return t(Object(A.a)(e,a))},appDataRuntimeSetDocumentTitleAction:function(e,a,n){return t(Object(x.a)(e,a,n))}}}))(F)},599:function(t,e,a){"use strict";var n=a(9);e.a=function(t){return{type:n.c,payload:t}}},600:function(t,e,a){"use strict";var n=a(9);e.a=function(t){return{type:n.e,payload:t}}}}]);