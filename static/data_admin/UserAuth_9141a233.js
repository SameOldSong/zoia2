(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{586:function(t,e,a){"use strict";a.r(e);var n=a(21),r=a.n(n),o=a(36),u=a.n(o),i=a(50),s=a.n(i),c=a(113),p=a.n(c),l=a(51),d=a.n(l),f=a(52),g=a.n(f),m=a(20),b=a.n(m),v=a(53),y=a.n(v),h=a(5),k=a.n(h),D=a(0),O=a.n(D),w=a(74),S=a(15),j=a(73),R=a.n(j),A=a(391),_=a.n(A),x=a(114),C=a(119),E=a(72),P=a.n(E),T=a(75),z=a(115),L=a(27),I=a(118),U=a(599),q=a(600),B=a(117),F=a(116);function M(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function V(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(a,!0).forEach((function(e){k()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var G=Object(D.lazy)((function(){return Promise.all([a.e(0),a.e(3)]).then(a.bind(null,601))}));Promise.all([a.e(0),a.e(8)]).then(a.t.bind(null,609,7));var H=function(t){function e(t){var n;return s()(this,e),n=d()(this,g()(e).call(this,t)),k()(b()(n),"state",{language:n.props.appData.language,catalogs:n.props.appLingui.catalogs}),k()(b()(n),"mounted",!1),k()(b()(n),"componentDidMount",(function(){n.props.appDataRuntimeGetConfigAction(),document.getElementById("app").classList.add("uk-flex","uk-flex-center","uk-flex-middle","za-users-appTheme"),n.query=_.a.parse(window.location.search),n.props.appDataRuntime.token&&T.b.push(n.query.redirect||"/"),n.mounted=!0})),k()(b()(n),"componentWillUnmount",(function(){n.mounted=!1,document.getElementById("app").classList.remove("uk-flex","uk-flex-center","uk-flex-middle","za-users-appTheme")})),k()(b()(n),"loadCatalog",function(){var t=u()(r.a.mark((function t(e){var o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(184)("./".concat(e,"/messages.js"));case 2:o=t.sent,n.mounted&&n.setState((function(t){var a=V({},t.catalogs,k()({},e,o)),r={language:e,catalogs:a};return n.props.appLinguiSetCatalogAction(e,o),r}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),k()(b()(n),"onSaveSuccessHandler",(function(t,e){return 200===t.data.statusCode&&t.data.token?(n.props.appDataRuntimeSetToken(t.data.token),n.props.appDataSetUserAction(t.data.user),document.getElementById("app").classList.remove("uk-flex","uk-flex-center","uk-flex-middle","za-ua-appTheme"),Object(x.set)("".concat(L.id,"_auth"),t.data.token,n.props.appDataRuntime.config.cookieOptions),T.b.push(n.query.redirect||"/")):403===t.data.statusCode?P.a.notification(e._({id:"Invalid username or password"}),{status:"danger"}):P.a.notification(e._({id:"Could not authorize"}),{status:"danger"})})),k()(b()(n),"render",(function(){var t=n.state,e=t.catalogs,a=t.language;return e&&e[a]?O.a.createElement(w.I18nProvider,{language:n.props.appData.language,catalogs:n.state.catalogs},O.a.createElement(w.I18n,null,(function(t){var e=t.i18n;return n.props.appDataRuntimeSetDocumentTitleAction(e._({id:"Authorize"}),n.props.appData.language,n.props.appDataRuntime.config.siteTitle),O.a.createElement("div",{className:"uk-card uk-card-default uk-card-body uk-card-small"},O.a.createElement(G,{prefix:"za_users_authForm",simple:!0,UIkit:P.a,axios:R.a,i18n:e,data:[{id:"username",type:"text",css:"uk-width-1-1",label:"".concat(e._({id:"Username"}),":"),autofocus:!0},{id:"password",type:"password",css:"uk-width-1-1",label:"".concat(e._({id:"Password"}),":")},{id:"divider1",type:"divider",css:"za-users-auth-form-divider"},{id:"btnLogin",type:"button",buttonType:"submit",css:"uk-button-primary uk-width-1-1 uk-button-large",label:e._({id:"Authorize"})}],validation:{username:{mandatory:!0,regexp:/^[a-zA-Z0-9_-]+$/},password:{mandatory:!0}},lang:{ERR_VMANDATORY:e._({id:"Field is required"}),ERR_VFORMAT:e._({id:"Invalid format"}),ERR_SAVE:e._({id:"Could not authorize on server"})},save:{url:"".concat(z.url,"/api/users/login"),method:"POST"},onSaveSuccess:function(t){return n.onSaveSuccessHandler(t,e)}}))}))):null})),n.loadCatalog(n.state.language),n}return y()(e,t),p()(e,[{key:"shouldComponentUpdate",value:function(t,e){var a=e.catalogs,n=e.language;return!(n!==this.props.appData.language&&!a[n])||(this.loadCatalog(n),!1)}}]),e}(D.Component);e.default=Object(S.c)((function(t){return{appData:t.appData,appDataRuntime:t.appDataRuntime,appLingui:t.appLingui}}),(function(t){return{appDataSetLanguageAction:function(e){return t(Object(I.a)(e))},appDataRuntimeSetToken:function(e){return t(Object(U.a)(e))},appDataSetUserAction:function(e){return t(Object(q.a)(e))},appLinguiSetCatalogAction:function(e,a){return t(Object(B.a)(e,a))},appDataRuntimeGetConfigAction:function(){return t(Object(C.a)())},appDataRuntimeSetDocumentTitleAction:function(e,a,n){return t(Object(F.a)(e,a,n))}}}))(H)},599:function(t,e,a){"use strict";var n=a(9);e.a=function(t){return{type:n.c,payload:t}}},600:function(t,e,a){"use strict";var n=a(9);e.a=function(t){return{type:n.e,payload:t}}},609:function(t,e,a){}}]);