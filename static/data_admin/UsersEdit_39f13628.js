(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{587:function(e,a,t){"use strict";t.r(a);var r=t(50),n=t.n(r),s=t(51),i=t.n(s),o=t(52),u=t.n(o),d=t(20),l=t.n(d),c=t(53),p=t.n(c),m=t(5),h=t.n(m),f=t(0),b=t.n(f),E=t(74),w=t(15),g=t(114),v=t(73),_=t.n(v),k=t(75),y=t(599),D=t(600),R=t(115),A=t(27),S=t(116),T=t(72),F=t.n(T),C=Object(f.lazy)((function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,602))})),O=Object(f.lazy)((function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,601))})),U=function(e){function a(e){var t;return n()(this,a),t=i()(this,u()(a).call(this,e)),h()(l()(t),"state",{loadingError:!1}),h()(l()(t),"componentDidMount",(function(){t.props.appDataRuntime.token||k.b.push("/admin/users/auth?redirect=/admin/users")})),h()(l()(t),"deauthorize",(function(){t.props.appDataRuntimeSetTokenAction(null),t.props.appDataSetUserAction({}),Object(g.remove)("".concat(A.id,"_auth")),k.b.push("/admin/users/auth?redirect=/admin/users")})),h()(l()(t),"onUsersTableLoadError",(function(e){e&&403===e.statusCode&&t.deauthorize()})),h()(l()(t),"onSaveSuccessHandler",(function(e){F.a.notification({message:e._({id:"Data has been saved successfully"}),status:"success"}),k.b.push("/admin/users?reload=1")})),h()(l()(t),"getEditForm",(function(e){return b.a.createElement(O,{ref:t.editUserForm,prefix:"editUserForm",UIkit:F.a,axios:_.a,i18n:e,data:[[{id:"username",type:"text",css:"uk-form-width-medium",label:e._({id:"Username"}),helpText:e._({id:"Latin chars/_/-, length: 4-32"}),autofocus:!0},{id:"email",type:"text",css:"uk-form-width-large",label:e._({id:"E-mail"}),helpText:e._({id:"Example: username@zoiajs.org"})},{id:"active",type:"select",label:e._({id:"Status"}),css:"uk-form-width-small",defaultValue:"1",updateFromProps:!0,values:{0:e._({id:"Inactive"}),1:e._({id:"Active"})}},{id:"admin",type:"select",label:e._({id:"Permissions"}),css:"uk-form-width-small",updateFromProps:!0,values:{0:e._({id:"Normal User"}),1:e._({id:"Administrator"})}}],[{id:"password",type:"password",css:"uk-width-small",label:e._({id:"Password"})},{id:"password2",type:"password",css:"uk-width-small",label:e._({id:"Repeat Password"})}],{id:"passwordMessage",type:"message",css:"uk-text-small",text:t.props.match.params.id?e._({id:"Only enter a new password in case you wish to change it for the current user. Password should be at least 8 characters long."}):e._({id:"Password is required when creating a new user, should be at least 8 characters long."})},{id:"divider1",type:"divider"},[{id:"btnCancel",type:"button",buttonType:"link",linkTo:"/admin/users",css:"uk-button-default uk-margin-small-right",label:e._({id:"Cancel"})},{id:"btnSave",type:"button",buttonType:"submit",css:"uk-button-primary",label:e._({id:"Save"})}]],validation:{username:{mandatory:!0,regexp:/^[a-zA-Z0-9_-]{4,32}$/},email:{mandatory:!0,regexp:/^(?:[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-])+@(?:[a-zA-Z0-9]|[^\u0000-\u007F])(?:(?:[a-zA-Z0-9-]|[^\u0000-\u007F]){0,61}(?:[a-zA-Z0-9]|[^\u0000-\u007F]))?(?:\.(?:[a-zA-Z0-9]|[^\u0000-\u007F])(?:(?:[a-zA-Z0-9-]|[^\u0000-\u007F]){0,61}(?:[a-zA-Z0-9]|[^\u0000-\u007F]))?)*$/},password:{shouldMatch:"password2"},password2:{shouldMatch:"password"}},lang:{ERR_VMANDATORY:{id:"Field is required"},ERR_VFORMAT:{id:"Invalid format"},ERR_VNOMATCH:{id:"Passwords do not match"},ERR_LOAD:{id:"Could not load data from server"},ERR_SAVE:{id:"Could not save data"},WILL_BE_DELETED:{id:"will be deleted. Are you sure?"},YES:{id:"Yes"},CANCEL:{id:"Cancel"}},save:{url:"".concat(R.url,"/api/users/save"),method:"POST",extras:{id:t.props.match.params.id,token:t.props.appDataRuntime.token}},load:t.props.match.params.id?{url:"".concat(R.url,"/api/users/load"),method:"POST",extras:{id:t.props.match.params.id,token:t.props.appDataRuntime.token}}:null,onSaveSuccess:function(){return t.onSaveSuccessHandler(e)},onLoadError:function(){return t.setState({loadingError:!0})},onLoadSuccess:function(){return t.setState({loadingError:!1})}})})),h()(l()(t),"reloadEditFormData",(function(e){e.preventDefault(),t.setState({loadingError:!1})})),h()(l()(t),"render",(function(){return b.a.createElement(C,null,b.a.createElement(E.I18n,null,(function(e){var a=e.i18n;return t.props.appDataRuntimeSetDocumentTitleAction(a._(t.props.match.params.id?"Edit User":"Create User"),t.props.appData.language,t.props.appDataRuntime.config.siteTitle),b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"uk-title-head uk-margin-bottom"},t.props.match.params.id?b.a.createElement(E.Trans,{id:"Edit User"}):b.a.createElement(E.Trans,{id:"Create User"})),t.state.loadingError?b.a.createElement("div",{className:"uk-alert-danger","uk-alert":"true"},b.a.createElement(E.Trans,{id:"Could not load data from server. Please check your URL or try to <0>reload</0> data.",components:[b.a.createElement("a",{href:"",onClick:t.reloadEditFormData})]})):t.getEditForm(a))})))})),t.editUserForm=b.a.createRef(),t}return p()(a,e),a}(f.Component);a.default=Object(w.c)((function(e){return{appData:e.appData,appDataRuntime:e.appDataRuntime,appLingui:e.appLingui}}),(function(e){return{appDataRuntimeSetTokenAction:function(a){return e(Object(y.a)(a))},appDataSetUserAction:function(a){return e(Object(D.a)(a))},appDataRuntimeSetDocumentTitleAction:function(a,t,r){return e(Object(S.a)(a,t,r))}}}))(U)},599:function(e,a,t){"use strict";var r=t(9);a.a=function(e){return{type:r.c,payload:e}}},600:function(e,a,t){"use strict";var r=t(9);a.a=function(e){return{type:r.e,payload:e}}}}]);